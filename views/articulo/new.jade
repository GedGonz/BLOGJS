extends ../layout

block content
    if valse && Articulo && User
       script(src="../../tinymce/tinymce.min.js")
    else
       script(src="../tinymce/tinymce.min.js")
    script
       |tinymce.init({
       |	selector: 'textarea',
       |height: 200,
       |theme: 'modern',
       |plugins: [
       |  'advlist autolink lists link image charmap print preview hr anchor pagebreak',
       |  'searchreplace wordcount visualblocks visualchars code fullscreen',
       |  'insertdatetime media nonbreaking save table contextmenu directionality',
       |  'emoticons template paste textcolor colorpicker textpattern imagetools'
       |],
       |toolbar1: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist |outdent indent | link image',
       |toolbar2: 'print preview media | forecolor backcolor emoticons',
       |image_advtab: true,
       |templates: [
       |  { title: 'Test template 1', content: 'Test 1' },
       |  { title: 'Test template 2', content: 'Test 2' }
       |],
       |content_css: [
       |  'http://fast.fonts.net/cssapi/e6dc9b99-64fe-4292-ad98-6974f93cd2a2.css',
       |  'http://www.tinymce.com/css/codepen.min.css'
       |]
       | });
       | var nval=false;
       | $(document).ready(function(){
       | });
       | /*Hace una Previsualizacion de la imagen antes de cargarla*/
       |   function mostrar()
       |   {
       |     var input = document.getElementById("portada");
       |     var fReader = new FileReader();
       |       fReader.readAsDataURL(input.files[0]);
       |       fReader.onloadend = function(event){
       |       var img = document.getElementById("matrix");
       |       img.src = event.target.result;
       |       $('.prevImag').hide();
       |       nval=true;
       |         }
       |     return false
       | }

    div(class="container")

      div(class="row margin")

         div(class="col-sm-3 col-md-1")
         div(class="col-sm-6 col-md-10")
               div(class="coment") Gestion de Nuevo Articulo
               hr(style="color: black; background-color: black; width:100%;")
               br
               br
               form(method='POST', action='/articulo/save', enctype='multipart/form-data')
                   div(class="form-group")
                     div(class="row")
                         div(class="col-md-6")
                             if valse && Articulo && User
                                input(name="updateart" type="hidden" value=Articulo[0]._id)
                                input(name="Titulo" type="text" class="form-control" placeholder="Titulo" value= Articulo[0].Titulo)
                                br
                                input(name="Autor" type="text" class="form-control" placeholder="Autor" readOnly="readOnly" value= User[0].Nombre+" "+User[0].Apellido)
                             else
                                input(name="Titulo" type="text" class="form-control" placeholder="Titulo")
                                br
                                input(name="Autor" type="text" class="form-control" placeholder="Autor")
                     br
                     div(class="row")
                         div(class="col-md-12")
                             if valse && Articulo && User
                                input(name="Descripcion" type="text" class="form-control" placeholder="Descripcion" value= Articulo[0].Descripcion)
                             else
                                input(name="Descripcion" type="text" class="form-control" placeholder="Descripcion")
                             br
                             div(class="col-md-1")
                                label Portada
                             div(class="col-md-3")
                               div(class="fileupload fileupload-new" data-provides="fileupload")
                                  span(class="btn btn-default btn-file") 
                                    span(class="fileupload-new") Examinar
                                    span(class="fileupload-exists") Change
                                    input(id="portada" name="portada"  type="file")
                                  span(class="fileupload-preview margin-left")
                                  a(id="FileNameSelect"  href="#" class="close fileupload-exists"   data-dismiss="fileupload" style="float: none") x
                             div(class="col-md-6")
                             div(class="col-md-2")
                                   a(id="btnPreview " class="btn btn-primary text-right" OnClick="mostrar();")
                                     <span class="glyphicon glyphicon-eye-open"></span>
                             hr(style="color: black; background-color: black; width:100%;")
                             if valse && Articulo && User
                               img(class="Imagcoment" src="http://res.cloudinary.com/gedgonz/image/upload/v1457199166/OC-Blog_pqzh4t.png")
                             else
                               div(class="prevImag text-center" id="prevImag") not Image
                               img(class="ImageUpload" src="" alt="" id="matrix")
                             hr(style="color: black; background-color: black; width:100%;")
                             

                     br
                     label Cuerpo
                     hr
                     if valse && Articulo && User
                       textarea(name="Cuerpo"  class="form-control" placeholder="Cuerpo") #{Articulo[0].Cuerpo}
                     else
                       textarea(name="Cuerpo"  class="form-control" placeholder="Cuerpo") 
                     br
                     br
                     div(class="form-group text-right")
                         if valse && Articulo && User
                           button(type="submit" class="btn btn-primary ")
                              <span class="glyphicon glyphicon-ok"></span> Update
                         else
                           button(type="submit" class="btn btn-primary ")
                              <span class="glyphicon glyphicon-ok"></span> Crear                           

                         button(class="btn btn-danger")
                            <span class="glyphicon glyphicon-remove"></span> Cancel
         div(class="col-sm-3 col-md-1")

      
